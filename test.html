<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>LozyLoad</title>
  <style>
    .images {
      display: flex;
      flex-direction: column;
      text-align: center;
      width: 500px;
    }

    .img-item {
      height: 1200px;
      width: 800px;
      margin: 20px;
    }
  </style>
</head>

<body>
  <div class="images">
    <img class="img-item" alt="loading" data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2308634081,3895540927&fm=26&gp=0.jpg">
    <img class="img-item" alt="loading" data-src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3337136167,1309930757&fm=26&gp=0.jpg">
    <img class="img-item" alt="loading" data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1589822619861&di=3c3adb0f519c5386d492467994c19b6f&imgtype=0&src=http%3A%2F%2Fattach.games.hehagame.com%2Fuploads%2Fallimg%2F150416%2F1422362632.jpg">
    <img class="img-item" alt="loading" data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1589822619861&di=1287762b98e8f40415fecb07ec5bd99f&imgtype=0&src=http%3A%2F%2Fimgcache.tuwandata.com%2Fv2%2Fthumb%2Fall%2FZmM2Nyw2MDAsMTAwLDQsMywxLC0xLDEs%2Fu%2Fwww.tuwan.com%2Fuploads%2Fallimg%2F1505%2F08%2F729_150508221856_1.jpg">
    <img class="img-item" alt="loading" data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1589822619860&di=a9991c92166d458dd603cbe4c4c443e8&imgtype=0&src=http%3A%2F%2Fpic2.52pk.com%2Ffiles%2Fallimg%2F150514%2F5329500_13202B114.jpg">
  </div>
  
    <script type="text/javascript">
        //获取观察器实例  changes是被观察的对象数组
        var observer = new IntersectionObserver(function(changes){  
            console.log(changes);
            changes.forEach(function(item, index){
              console.log(item, index)
                if(item.intersectionRatio > 0 && item.intersectionRatio < 1)
                    //target：被观察的目标元素，是一个 DOM 节点对象
                    item.target.src = item.target.dataset.src;
            });
        });
        function addObserver(){
            var listItems = document.querySelectorAll('.img-item');
            listItems.forEach(function(item){
                //实例的observe方法可以指定观察哪个DOM节点
                //开始观察  observe的参数是一个 DOM 节点对象
                observer.observe(item);
            });
        }
        addObserver();
    </script>
   
  <!-- <script type="text/javascript">
    //获取img
    var imgs = document.querySelectorAll('img');
    //懒加载方法
    var lazyload = function ()
    {
      //获取浏览器滚动高度
      var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
      //获取浏览器可视高度
      var winTop = window.innerHeight;
      for (var i = 0; i < imgs.length; i++) {
        //imgs[i].offsetTop 距离文档顶部的高度
        //如果元素距离文档顶部的高度小于  浏览器的滚动高度加浏览器的可视高度，则需要加载
        if (imgs[i].offsetTop < scrollTop + winTop) {
          imgs[i].src = imgs[i].getAttribute('data-src');
        }
      }
    }
    //调用懒加载函数
    function throttle(method, delay)
    {
      var timer = null;
      return function ()
      {
        var context = this, args = arguments;
        clearTimeout(timer);
        timer = setTimeout(function ()
        {
          // method.apply(context,args);
          method()
        }, delay);
      }
    }
    window.onscroll = throttle(lazyload, 200);
  </script> -->
</body>

</html>